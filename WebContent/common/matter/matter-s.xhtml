<ui:composition template="/templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

	<ui:define name="title">案件情報検索</ui:define>

	<ui:define name="content">
		<div class="row">
			<div class="col-4">
				<h:form>
					<div style="margin: auto 0; height: 50px" class="text-center">
						<h:commandButton action="#{matterBean.register()}"
							value="案件情報新規作成" style="width:200px"
							styleClass="float-none btn btn-primary  btn-lg text-center" />
					</div>
				</h:form>
				<h:form>
					<div class="mx-auto text-center box17"
						style="margin: 20px 0 30px 0">
						<h3>検索</h3>
						<h:panelGrid columns="3" styleClass="table  table-borderless">
			案件コード<h:inputText value="#{matterBean.searchCondition.projectCode}"
								id="projectCode">
							</h:inputText>
							<h:messages class="message" for="projectCode" />

			案件名<h:inputText value="#{matterBean.searchCondition.projectName}"
								id="projectName">
							</h:inputText>
							<h:messages class="message" for="projectName" />


			受注予定年月日(開始):<h:inputText id="receivedDateS"
								value="#{matterBean.searchCondition.receivedDateStart}"
								p:type="date" label="予定年月日">
								<f:convertDateTime pattern="yyyy-MM-dd" timeZone="Asia/Tokyo" />
							</h:inputText>
							<h:messages class="message" for="receivedDateS" />

			受注予定年月日(終了):<h:inputText id="receivedDateE"
								value="#{matterBean.searchCondition.receivedDateEnd}"
								p:type="date" label="予定年月日">
								<f:convertDateTime pattern="yyyy-MM-dd" timeZone="Asia/Tokyo" />
							</h:inputText>
							<h:messages class="message" for="receivedDateE" />
				受注確度<h:selectOneMenu id="acc"
								value="#{matterBean.searchCondition.accuracy}">
								<f:selectItem itemValue="" itemLabel="" />
								<f:selectItems value="#{matterBean.map.acc}" />
							</h:selectOneMenu>
							<h:messages class="message" for="acc" />

 				案件ステータス<h:selectOneMenu
								value="#{matterBean.searchCondition.projectStatus}" id="status">
								<f:selectItem itemValue="" itemLabel="" />
								<f:selectItems value="#{matterBean.map.pStatus}" />
							</h:selectOneMenu>
							<h:messages class="message" for="status" />

				取引先<h:selectOneMenu
								value="#{matterBean.searchCondition.customerCode}"
								id="customerCode">
								<f:selectItem itemValue="" itemLabel="" />
								<f:selectItems value="#{matterBean.map.customerCode}" />
							</h:selectOneMenu>
							<h:messages class="message" for="customerCode" />

						</h:panelGrid>
						<h:commandButton action="#{matterBean.search()}" value="検索"
							style="width:200px"
							styleClass=" btn btn-primary  btn-lg text-center mb-3" />

						<br />

						<h:commandButton action="#{matterBean.searchClear()}"
							value="検索条件クリア" style="width:200px"
							styleClass=" btn btn-primary  btn-lg text-center" />
					</div>
				</h:form>
			</div>
			<div class="col-8">
				<h3>案件情報一覧</h3>
				<h:outputText value="#{matterBean.deleteMessage}"
					styleClass="message" />

				<h:form>


					<h:panelGrid columns="5"
						styleClass="table table-striped  table-borderless">
						<h:commandLink action="#{matterBean.movePage('top')}"
							rendered="#{matterBean.page.pastPageExt()}">＜＜</h:commandLink>
						<h:outputText value="＜＜"
							rendered="#{!matterBean.page.pastPageExt()}" />
						<h:commandLink action="#{matterBean.movePage('past')}"
							rendered="#{matterBean.page.pastPageExt()}">＜</h:commandLink>
						<h:outputText value="＜"
							rendered="#{!matterBean.page.pastPageExt()}" />
			[#{matterBean.page.currentPage} / #{matterBean.page.maxPage}]
			<h:commandLink action="#{matterBean.movePage('next')}"
							rendered="#{matterBean.page.nextPageExt()}">＞</h:commandLink>
						<h:outputText value="＞"
							rendered="#{!matterBean.page.nextPageExt()}" />
						<h:commandLink action="#{matterBean.movePage('last')}"
							rendered="#{matterBean.page.nextPageExt()}">＞＞</h:commandLink>
						<h:outputText value="＞＞"
							rendered="#{!matterBean.page.nextPageExt()}" />
					</h:panelGrid>
				</h:form>

				<h:dataTable value="#{matterBean.page.projectList}" var="f"
					styleClass="table table-striped table table-hover table-borderless">
					<h:column>
						<f:facet name="header">案件コード</f:facet>
						<h:outputText value="#{f.projectCode}" />
					</h:column>

					<h:column>
						<f:facet name="header">案件名</f:facet>
						<h:outputText value="#{f.projectNameHidden}" />
					</h:column>

					<h:column>
						<f:facet name="header">受注予定日</f:facet>
						<h:outputText value="#{f.receivedDate}">
							<f:convertDateTime pattern="yyyy-MM-dd" timeZone="Asia/Tokyo" />
						</h:outputText>
					</h:column>

					<h:column>
						<f:facet name="header">案件ステータス</f:facet>
						<h:outputText
							value="#{matterBean.map.pStatusR.get(f.projectStatus)}" />
					</h:column>

					<h:column>
						<f:facet name="header">受注確度</f:facet>
						<h:outputText value="#{matterBean.map.accR.get(f.accuracy)}" />
					</h:column>

					<h:column>
						<f:facet name="header">取引先名</f:facet>
						<h:outputText value="#{f.customerCode}" />
						<!-- 							value="#{matterBean.map.customerCodeR.get(f.customerCode)}" /> -->
					</h:column>

					<h:column>
						<h:form>
							<f:facet name="header">編集</f:facet>
							<h:commandButton action="#{matterBean.edit(f)}" value="編集"
								styleClass="float-none btn btn-outline-primary text-center" />
						</h:form>
					</h:column>

					<h:column>
						<h:form>
							<f:facet name="header">削除</f:facet>
							<h:commandButton action="#{matterBean.delete(f)}" value="削除"
								onclick="return confirm('削除してもよろしいでしょうか?')"
								styleClass="float-none btn btn-outline-primary  text-center" />
						</h:form>
					</h:column>
				</h:dataTable>
			</div>

		</div>




	</ui:define>
</ui:composition>
